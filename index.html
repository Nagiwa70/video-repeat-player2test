<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>動画区間リピートプレイヤー</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="container">
    <h1>
      動画区間リピートプレイヤー
      <button id="themeToggleBtn" aria-label="テーマ切替" title="ライト/ダーク切り替え">🌙</button>
    </h1>

    <div id="input-container">
      <div id="videoUploadContainer">
        <label for="videoInput" class="custom-file-upload">ローカルファイルを選択</label>
        <input type="file" id="videoInput" accept="video/*" style="display: none;" />
      </div>
      <form id="urlInputContainer">
        <input type="text" id="youtubeUrlInput" placeholder="YouTubeのURLをペースト" />
        <button type="submit">読み込み</button>
      </form>
    </div>

    <div id="player-wrapper">
      <div id="videoContainer">
        <video id="videoPlayer" width="640" playsinline webkit-playsinline></video>
      </div>
      <div id="youtubePlayerContainer"></div>
      
      <div id="pcFeedbackOverlay"></div>
      <div id="mobileUiOverlay">
        <div id="mobilePlayPauseIcon"></div>
      </div>

      <div id="videoControls">
        <div id="progressBarContainer" title="クリックまたはドラッグで再生位置を移動">
          <div id="progressTimeTooltip">00:00</div>
          <div id="progressBar"></div>
          <div id="repeatRangeBar"></div>
        </div>
        <div class="controls-bottom-bar">
          <div id="timeDisplay">00:00 / 00:00</div>
          <button id="fullscreenBtn" title="全画面表示 (F)">
            <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></svg>
          </button>
        </div>
      </div>
    </div>
    
    <div class="controls-group">
      <p class="shortcuts-info">
        <strong>Z/X</strong>: 開始/終了, <strong>C</strong>: リセット, <strong>V</strong>: 開始へ, <strong>Space</strong>: 再生/停止<br>
        <strong>←→</strong>: 速度±0.1, <strong>↑↓</strong>: 速度±0.01, <strong>F</strong>: 全画面, <strong>Home/End</strong>: ±1秒
      </p>
    </div>

    <div id="speedControl">
      <label for="speedRange">再生速度:</label>
      <input type="range" id="speedRange" min="0.25" max="4" step="0.01" value="1" />
      <input type="number" id="speedValue" min="0.25" max="4" step="0.01" value="1.00" />
    </div>

    <p id="repeatRangeDisplay">リピート区間: 未設定</p>

    <div id="actionButtons">
      <button id="setStartBtn">開始 (Z)</button>
      <button id="setEndBtn">終了 (X)</button>
      <button id="goStartBtn">開始へ (V)</button>
      <button id="skipBackwardBtn"> -1s (End)</button>
      <button id="skipForwardBtn"> +1s (Home)</button>
      <button id="resetButton" class="reset-btn">リセット (C)</button>
    </div>
  </div>

  <div id="toastContainer"></div>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="script.js"></script>
</body>
</html>